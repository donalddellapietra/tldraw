#!/usr/bin/env bash
. "$(dirname -- "$0")/_/husky.sh"

set -e

rm -rf *.tsbuildinfo */*.tsbuildinfo */*/*.tsbuildinfo */*/*/*.tsbuildinfo */*/*/*/*.tsbuildinfo

# This notifies the user if the yarn.lock file has changed.
CHANGED=$(git diff "$1" "$2" --stat -- ./yarn.lock | wc -l)
if (( CHANGED > 0 )); then
    echo
    echo "ðŸš¨ ðŸš¨ ðŸš¨ yarn.lock has changed! ðŸš¨ ðŸš¨ ðŸš¨ "
    echo "run 'yarn' to get the latest!"
    echo
fi

command -v git-lfs >/dev/null 2>&1 || { printf >&2 "\n%s\n\n" "This repository is configured for Git LFS but 'git-lfs' was not found on your path. If you no longer wish to use Git LFS, remove this hook by deleting the 'post-checkout' file in the hooks directory (set by 'core.hookspath'; usually '.git/hooks')."; exit 2; }
git lfs post-checkout "$@"
